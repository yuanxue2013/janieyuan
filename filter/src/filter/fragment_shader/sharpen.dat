varying vec2 vTextureCoord;

uniform sampler2D texture;

uniform float centerMultiplier;


uniform float canvasWidth;
uniform float canvasHeight;


void main()
{
    float wStep = 1.0/canvasWidth;
    float hStep = 1.0/canvasHeight;

    vec4 textureColor = texture2D(texture, vTextureCoord);

    vec4 color = textureColor * (centerMultiplier + 1.0);

    for(float i = -1.0; i <= 1.0; i ++){
        for(float j = -1.0; j <= 1.0; j ++){
            if(i != 0.0 || j != 0.0){
                color = color - texture2D(texture, vTextureCoord + vec2(i*wStep, j*hStep))*(centerMultiplier/8.0);
            }
        }
    }
    gl_FragColor = color;

}
